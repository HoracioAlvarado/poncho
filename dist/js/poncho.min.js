function ponchoTable(e){var a,o=[],t=[],n=[],r=[],s="",i=[],l="";jQuery.fn.DataTable.isDataTable("#ponchoTable")&&jQuery("#ponchoTable").DataTable().destroy(),jQuery.getJSON("https://spreadsheets.google.com/feeds/list/"+e.idSpread+"/"+e.hojaNumero+"/public/values?alt=json",function(c){o=c.feed.entry,jQuery.each(Object.keys(o[0]),function(e,a){"gsx$"==a.substr(0,4)&&(t.push(o[0][a].$t),n.push(a),s+="<th>"+o[0][a].$t+"</th>",i.push(o[0][a].$t))}),jQuery("#ponchoTable caption").html(e.tituloTabla),jQuery("#ponchoTable thead tr").empty(),jQuery("#ponchoTable thead tr").append(s),jQuery.each(o,function(e,t){e>0&&(l+="<tr>",jQuery.each(n,function(t,s){var c="";if("gsx$"==s.substr(0,4)){var p=o[e][n[t]].$t;if(s==n[0])var u=p;if(s.includes("btn-")&&""!=p){var d=s.substr(8,s.length-8).replace("-"," ");p='<a aria-label="'+d+" "+u+'" class="btn btn-primary btn-sm margin-btn" target="_blank" href="'+p+'">'+d+"</a>"}if(s.includes("filtro-")&&""!=p){a=t;var g=s.substr(11,s.length-11).replace("-"," ");jQuery("#tituloFiltro").html(g),r.push(p)}if(s.includes("fecha-")&&""!=p){var h=p.split("/");p='<span style="display:none;">'+(h[2]+"-"+h[1]+"-"+h[0])+"</span>"+p}""==p&&(c="hidden-xs"),p=(new showdown.Converter).makeHtml(p),l+='<td class="'+c+'" data-title="'+i[t]+'">'+p+"</td>"}}),l+="</tr>")}),jQuery.each(r.filter(function(e,a,o){return a===o.indexOf(e)}),function(e,a){jQuery("#ponchoTableFiltro").append("<option>"+a+"</option>")}),jQuery("#ponchoTable tbody").empty(),jQuery("#ponchoTableSearchCont").show(),jQuery("#ponchoTable tbody").append(l),jQuery("#ponchoTable").removeClass("state-loading"),function(){function o(e){return e.replace(/έ/g,"ε").replace(/[ύϋΰ]/g,"υ").replace(/ό/g,"ο").replace(/ώ/g,"ω").replace(/ά/g,"α").replace(/[ίϊΐ]/g,"ι").replace(/ή/g,"η").replace(/\n/g," ").replace(/[áÁ]/g,"a").replace(/[éÉ]/g,"e").replace(/[íÍ]/g,"i").replace(/[óÓ]/g,"o").replace(/[úÚ]/g,"u").replace(/ê/g,"e").replace(/î/g,"i").replace(/ô/g,"o").replace(/è/g,"e").replace(/ï/g,"i").replace(/ü/g,"u").replace(/ã/g,"a").replace(/õ/g,"o").replace(/ç/g,"c").replace(/ì/g,"i")}var t=jQuery.fn.DataTable.ext.type.search;console.log(jQuery.fn.DataTable.ext.type.search),t.string=function(e){return e?"string"==typeof e?o(e):e:""},t.html=function(e){return e?"string"==typeof e?o(e.replace(/<.*?>/g,"")):e:""};var n=jQuery("#ponchoTable").DataTable({lengthChange:!1,autoWidth:!1,pageLength:e.cantidadItems,columnDefs:[{type:"html-num",targets:e.tipoNumero},{targets:e.ocultarColumnas,visible:!1}],ordering:e.orden,order:[[e.ordenColumna-1,e.ordenTipo]],dom:"<'row'<'col-sm-6'l><'col-sm-6'f>><'row'<'col-sm-12'i>><'row'<'col-sm-12'tr>><'row'<'col-md-offset-3 col-md-6 col-sm-offset-2 col-sm-8'p>>",language:{sProcessing:"Procesando...",sLengthMenu:"Mostrar _MENU_ registros",sZeroRecords:"No se encontraron resultados",sEmptyTable:"Ningún dato disponible en esta tabla",sInfo:"_TOTAL_ resultados",sInfoEmpty:"No hay resultados",sInfoFiltered:"",sInfoPostFix:"",sSearch:"Buscar:",sUrl:"",sInfoThousands:".",sLoadingRecords:"Cargando...",oPaginate:{sFirst:"<<",sLast:">>",sNext:">",sPrevious:"<"},oAria:{sSortAscending:": Activar para ordenar la columna de manera ascendente",sSortDescending:": Activar para ordenar la columna de manera descendente",paginate:{first:"Ir a la primera página",previous:"Ir a la página anterior",next:"Ir a la página siguiente",last:"Ir a la última página"}}}});jQuery(document).ready(function(){jQuery("#ponchoTableSearch").keyup(function(){n.search(jQuery.fn.DataTable.ext.type.search.string(this.value)).draw()}),jQuery.isFunction(jQuery.fn.dataTable.ext.order.intl)&&(jQuery("#ponchoTable").dataTable.ext.order.intl("es"),jQuery("#ponchoTable").dataTable.ext.order.htmlIntl("es"))}),jQuery("#ponchoTable_filter").parent().parent().remove(),jQuery("#ponchoTableFiltro option").length>1&&jQuery("#ponchoTableFiltroCont").show();jQuery("#ponchoTableFiltro").on("change",function(){var e=jQuery(this).val();""!=e?n.column(a).every(function(){this.search(jQuery.fn.DataTable.ext.type.search.string(e)).draw()}):n.search("").columns().search("").draw()})}()})}jQuery("#ponchoTable").addClass("state-loading");var opt={tipoMapa:"roadmap"};function ponchoMaps(e){var a,o={center:{lat:-39.6930895,lng:-57.2432742},zoom:5,mapTypeId:e.tipoMapa,styles:[{featureType:"administrative.country",stylers:[{visibility:"on"}]},{featureType:"poi",stylers:[{visibility:"off"}]}]},t=new google.maps.Map(document.getElementById("map"),o);jQuery.getJSON("https://spreadsheets.google.com/feeds/list/"+e.idSpreadheet+"/"+e.hojaNumero+"/public/values?alt=json",function(o){var n=["metricas.mod@gmail.com","modernizacion.ux@gmail.com","contenidosgobar@gmail.com"];jQuery.each(o.feed.author,function(e,a){-1==n.indexOf(a.email.$t)&&(jQuery("body").remove(),window.location.replace("http://www.argentina.gob.ar"))}),a=o.feed.entry;var r=[],s=[],i=['<?xml version="1.0"?>','<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="286.818px" height="396.798px" viewBox="63.14 8.15 286.818 396.798" enable-background="new 63.14 8.15 286.818 396.798" xml:space="preserve">','<path stroke="#FFF" stroke-width="10" fill="{{ color }}" d="M206.549,20.359L206.549,20.359c-74.459,0-134.584,60.126-134.584,134.584c0,25.961,8.293,50.751,19.832,71.122l87.71,151.801c5.499,9.916,16.586,14.874,27.043,14.874c10.458,0,21.003-4.958,27.043-14.874l87.71-151.711c11.629-20.373,19.832-44.712,19.832-71.124C341.133,80.574,281.008,20.359,206.549,20.359z M206.549,206.978c-33.804,0-61.41-27.606-61.41-61.41s27.606-61.41,61.41-61.41s61.41,27.606,61.41,61.41C267.959,179.484,240.353,206.978,206.549,206.978z"/>',"</svg>"].join("\n"),l={azul:{hex:"#0072BB"},verde:{hex:"#2E7D33"},rojo:{hex:"#C62828"},gris:{hex:"#707070"},fucsia:{hex:"#EC407A"},arandano:{hex:"#C2185B"},uva:{hex:"#6A1B99"},cielo:{hex:"#039BE5"},verdin:{hex:"#6EA100"},lima:{hex:"#CDDC39"},maiz:{hex:"#FFCE00"},tomate:{hex:"#EF5350"},"naranja oscuro":{hex:"#EF6C00"},"verde azulado":{hex:"#008388"}};jQuery.each(a,function(a,o){var n=o.gsx$color.$t.toLowerCase(),p=i.replace("{{ color }}",l[n].hex),u=new google.maps.LatLng(o.gsx$latitud.$t,o.gsx$longitud.$t),d=new google.maps.Marker({position:u,title:o.gsx$nombre.$t,icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(p),scaledSize:new google.maps.Size(40,40)},optimized:!1});r.push(d);var g="",h="",m="",f="",v="",y="";(""==o.gsx$provincia.$t&&""==o.gsx$localidad.$t||(v='<div class="separarGuiones"><i class="fa fa-map-marker"></i><span>'+o.gsx$direccion.$t+"</span><span>"+o.gsx$localidad.$t+"</span><span>"+o.gsx$provincia.$t+"</span></div>"),""!=o.gsx$telefono.$t&&(g="<div><i class='fa fa-phone'></i>"+o.gsx$telefono.$t+"</div>"),""!=o.gsx$email.$t&&(h="<div><i class='fa fa-envelope'></i>"+o.gsx$email.$t+"</div>"),""!=o.gsx$descripcion.$t)&&(f="<div>"+(new showdown.Converter).makeHtml(o.gsx$descripcion.$t)+"</div>");""!=o.gsx$boton.$t&&(m="<hr><a class='btn btn-success btn-sm' href="+o.gsx$boton.$t+">"+e.textoBoton+"</a>"),null!=o.gsx$foto&&(y='<img width="100%" src="'+o.gsx$foto.$t+'">'),s[a]=new google.maps.InfoWindow({content:'<div class="media"><div class="media-body"><small class="text-primary">'+o.gsx$tipo.$t+"</small><h4>"+o.gsx$nombre.$t+"</h4> "+y+f+v+g+h+m+"</div></div>",maxWidth:300}),r[a].addListener("click",function(){c(),s[a].open(t,r[a])}),jQuery("#map-container").removeClass("state-loading"),d.setMap(t)});var c=function(){for(var e=0;e<s.length;e++)s[e].close()};if("si"==e.agrupar)new MarkerClusterer(t,r,{enableRetinaIcons:!0,imageSizes:[20,30,40,50,60,70],maxZoom:10,gridSize:50,styles:[{textColor:"white",url:"https://www.argentina.gob.ar/sites/default/files/cluster_ponchomaps.png",width:45,height:45}]})})}var content_popover=document.getElementById("content-popover");function popshow(){content_popover.classList.toggle("hidden")}function pophidde(){content_popover.classList.add("hidden")}var ponchoUbicacion=function(e){var a,o,t,n,r="/profiles/argentinagobar/themes/contrib/poncho/resources/jsons/geoprovincias.json",s="/profiles/argentinagobar/themes/contrib/poncho/resources/jsons/geolocalidades.json",i=jQuery('input[name="submitted['+e.provincia+']"]'),l=jQuery('input[name="submitted['+e.localidad+']"]');function c(e){return e.charAt(0).toUpperCase()+e.slice(1)}function p(e,a,o,t=!1,n=!1){var r=jQuery("<select></select>").attr("id",a).attr("name",e).addClass("form-control form-select").prop("required",t);return n&&r.append("<option value=''>Seleccione una opción</option>"),jQuery.each(o,function(e,a){r.append("<option value='"+a.id+"'>"+a.nombre+"</option>")}),r}function u(e,a){var o=l.prop("required"),t=p("sLocalidades","sLocalidades",[],o,!0);return a&&(t=p("sLocalidades","sLocalidades",e.filter(function(e){return String(e.provincia.id)==String(a)}).map(function(e){return e.departamento.nombre&&(e.nombre=c(e.departamento.nombre.toLowerCase())+" - "+c(e.nombre.toLowerCase())),e}).sort(function(e,a){return e.nombre<a.nombre?-1:e.nombre>e.nombre?1:0}),o)),t}r=e.urlProvincias?e.urlProvincias:r,s=e.urlLocalidades?e.urlLocalidades:s,jQuery.getJSON(r,function(e){a=function(e){return a=[],e.results.forEach(function(e,o){a.push(e)}),a}(e),(t=function(e){var a=[];a=e.sort(function(e,a){return e.id-a.id});var o=i.prop("required");return p("sProvincias","sProvincias",a,o,!0)}(a)).on("change",function(e){if(i.val(""),l.val(""),n.children("option:not(:first)").remove(),""!=t.val()){i.val(t.find(":selected").text());var a=u(o,t.val()),r=a.find("option");n.append(r),n.val("")}}),i.after(t),jQuery(t).select2()}),jQuery.getJSON(s,function(e){o=function(e){return o=[],e.results.forEach(function(e,a){o.push(e)}),o}(e),(n=u(o,"")).on("change",function(e){l.val(""),""!=n.val()&&l.val(n.find(":selected").text())}),l.after(n),jQuery(n).select2()}),i.hide(),l.hide()};